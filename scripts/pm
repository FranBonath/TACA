#!/usr/bin/env python

""" This is the entry point for PM.
"""
from cement.core import foundation, handler
from pm.core import controllers

class PmApp(foundation.CementApp):
    class Meta:
        label = 'PM'
        base_controller = controllers.BaseController

# Create the main application
app = PmApp()

try:
    # Register handlers
    handler.register(controllers.StorageController)

    # Setup the application
    app.setup()

    # Add any common arguments to all handlers
    app.args.add_argument('-c', '--config', type=str, help="Path to the configuration file")

    app.run()
finally:
    # close the app
    app.close()